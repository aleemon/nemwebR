---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# nemwebR

<!-- badges: start -->
<!-- badges: end -->

The goal of `nemwebR` is to enable easy downloading of datasets from the [AEMO NEM Web site](https://www.aemo.com.au/energy-systems/electricity/national-electricity-market-nem/data-nem/market-data-nemweb). `nemwebR` has a series of functions for fetching common datasets such as market prices, generator outputs or bids.

`nemwebR` is designed specifically for those looking to access market data but without access to the MMS Data Model typically available to registered market participants.

The naming and design of these functions is intended to mirror the naming and conventions of the [MMS Data Model Report](http://nemweb.com.au/Reports/Current/MMSDataModelReport/Electricity/MMS%20Data%20Model%20Report_files/MMS_2.htm). For clarity, only _public_ datasets (or _private; public next day_) are available.

There are a few key differences relative to the raw AEMO data:
* AEMO csv headers and footers are removed so that the data is ready to use
* Empty and deprecated columns are stripped out to keep the final data cleaner
* When dealing with dispatch datasets intervention heirachies have already been implemented correctly
* All dates and times are formatted in POSIX +10 (Australia/Brisbane)


## Five Minute Settlement

Note that as of 1 October 2021 the NEM is dispatched and settled in 5 minute intervals. The old 30 minute interval _trading_ datasets are no longer valid for new data, but exist for historical purposes.  


## Available Datasets - Archive

### Dispatch Data
* DISPATCH_FCAS_REQ -- Regional FCAS requirements
* DISPATCHLOAD -- Scheduled and semi-scheduled generator outputs
* DISPATCHPRICE -- Regional prices
* DISPATCHREGIONSUM -- Regional demand and non-scheduled generation


### Generator Registration data
* DUDETAILSUMMARY -- Summary of registration details for all registered generators
* DUDETAIL -- Registration details for all registered generators
* GENUNITS -- Summary of individual unit registration details, including fuel type and CO~2~ emission information

### Bid Data

* BIDDAYOFFER -- Bid price band data for energy and FCAS markets submitted by generators
* BIDPEROFFER -- Bid generation volumes for energy and FCAS markets submitted by generators
* BIDDUIDDETAILS -- Enablement levels and FCAS trapezium 


### Trading Data (Historical 30-minute data)
Note that these data are no longer updated as of 1 October 2021

* TRADINGINTERCONNECT -- Interconnector flows and limits
* TRADINGLOAD -- Scheduled and semi-scheduled generator outputs
* TRADINGPRICE -- Regional prices
* TRADINGREGIONSUM -- Regional demand and non-scheduled generation



## Available Datasets - Current

* DISPATCHPRICE (incomplete)


## Installation

Install the current version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("aleemon/nemwebR")
```
## Example

A basic example of fetching pricing data:

```{r example}
library(nemwebR)
library(purrr)

## fetch 30-minute pricing data for the first 3 months of 2020
input <- seq(20200101, 20200301, by = 100)

prices_q1_2020 <- map_dfr(input, nemwebR_archive_tradingprice)

head(prices_q1_2020)

```


## Development

nemwebR is under active development and features may be added or removed. There are number of obvious areas for improvement, but the core functions are sufficient for most applications.

Future improvements:

* Speed improvements -- the functions are currently built on the base `read.csv()` function, `dplyr::read_csv()` isn't usable because of the AEMO header structure. A read function from the `Data Table` package will likely improve speed

* Formatting challenge -- Current reports are released based on AEMO trading days (4:30 - 4:00 AM) whereas archive datasets are stored based on settlement (i.e. starting and ending at midnight). This is annoying.
